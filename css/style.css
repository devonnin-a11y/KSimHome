/* ============== ROOT THEME ================= */
:root{
  --bg-main:#0c141a;
  --bg-panel:linear-gradient(135deg,rgba(12,28,36,.92),rgba(5,14,18,.92));
  --bg-panel-light:linear-gradient(135deg,rgba(20,50,62,.92),rgba(11,25,32,.92));
  --border-gold:#c29a39;
  --accent:#37e0ff;
  --accent-soft:rgba(55,224,255,.45);
  --accent-violet:#6c4eff;
  --accent-life:#6ae67e;
  --text:#dff9ff;
  --text-soft:rgba(223,249,255,.6);
  --danger:#ff6a6a;
}

/* Reset */
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
html,body{width:100%;height:100%;background:var(--bg-main);color:var(--text);font-family:"Inter",sans-serif;overflow:hidden;}

/* =================== LAYOUT ===================== */
.cas-shell{display:flex;flex-direction:column;height:100vh;width:100vw;overflow:hidden;position:relative;}

/* ---------- Top Bar ---------- */
.cas-topbar{
  height:46px;display:flex;align-items:center;justify-content:space-between;
  padding:0 12px;background:rgba(0,0,0,.35);backdrop-filter:blur(6px);
  border-bottom:1px solid rgba(255,255,255,.08);
}
.top-title{font-size:16px;font-weight:600;letter-spacing:.3px;color:var(--text);}
.top-back{background:none;border:none;color:var(--accent);font-size:20px;opacity:.9;}
.top-back.hidden{visibility:hidden;}
.top-right{display:flex;align-items:center;gap:6px;}
.music-toggle{
  padding:4px 8px;font-size:12px;border-radius:6px;border:1px solid rgba(255,255,255,.15);
  background:rgba(0,0,0,.35);color:var(--text);
}

/* Weather chip */
.top-weather{
  width:34px;height:34px;border-radius:8px;background:rgba(255,255,255,.08);
  backdrop-filter:blur(4px);
}

/* ================= MAIN AREA ================== */
.cas-main{
  flex:1;display:flex;align-items:center;justify-content:center;position:relative;
  overflow:hidden;padding:0 8px;
}

/* ---------------- SIM ROOM ----------------- */
.sim-room{
  width:220px;height:350px;position:relative;display:flex;align-items:center;justify-content:center;
}
.sim-floor-shadow{
  position:absolute;bottom:25px;width:120px;height:26px;border-radius:50%;
  background:rgba(0,0,0,.55);filter:blur(10px);
}
.sim-avatar{
  width:180px;max-height:260px;object-fit:contain;position:absolute;bottom:30px;
  mask-image:url('../images/mask-soft.png');mask-size:contain;mask-repeat:no-repeat;
}

/* Magical Rune Ring under feet */
.sim-room::before{
  content:'';position:absolute;bottom:24px;left:50%;transform:translateX(-50%);
  width:140px;height:140px;border-radius:50%;
  background:radial-gradient(circle,rgba(55,224,255,.25),rgba(12,28,36,0));
  border:1px solid var(--accent-soft);filter:blur(4px);
  animation:runePulse 5s infinite ease-in-out;
}
@keyframes runePulse{
  0%{opacity:.4;transform:translateX(-50%) scale(.95);}
  50%{opacity:.9;transform:translateX(-50%) scale(1.05);}
  100%{opacity:.4;transform:translateX(-50%) scale(.95);}
}

/* Sim Text Meta */
.sim-meta{text-align:center;margin-top:4px;}
.sim-meta-main{font-size:18px;font-weight:600;}
.sim-meta-sub{font-size:12px;color:var(--text-soft);}
.sim-mood-tag{
  margin-top:6px;display:inline-flex;gap:6px;padding:4px 10px;
  background:rgba(255,255,255,.08);border-radius:14px;
  border:1px solid rgba(255,255,255,.12);font-size:12px;
}
.sim-hint{text-align:center;margin-top:6px;font-size:11px;color:var(--text-soft);}

/* ----------------- NEED BAR LEFT ------------------ */
.need-bar-left{
  position:absolute;left:6px;top:50%;transform:translateY(-50%);
  display:flex;flex-direction:column;gap:6px;z-index:4;
}
.need-dot{
  width:38px;height:38px;border-radius:50%;border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.35);font-size:18px;display:flex;align-items:center;
  justify-content:center;cursor:pointer;transition:.15s;
}
.need-dot:active{transform:scale(.92);}

/* HYGIENE MENU */
.hygiene-menu{
  position:absolute;left:60px;top:50%;transform:translateY(-50%);
  display:none;flex-direction:column;gap:6px;padding:8px;border-radius:14px;
  background:radial-gradient(circle at top,rgba(23,59,76,.95),rgba(5,15,21,.95));
  box-shadow:0 8px 24px rgba(0,0,0,.7);z-index:5;
}
.hygiene-menu.open{display:flex;}
.hygiene-menu button{
  border-radius:999px;border:1px solid rgba(255,255,255,.2);padding:5px 10px;
  font-size:11px;background:linear-gradient(135deg,rgba(22,88,109,.95),rgba(11,39,51,.95));
  color:#eaf8ff;cursor:pointer;box-shadow:0 3px 10px rgba(0,0,0,.4);
}
.hygiene-menu button:active{transform:translateY(1px);}

/* ----------------- RIGHT PANEL ----------------- */
.cas-panel{
  position:absolute;right:-370px;top:0;height:100%;width:320px;
  background:var(--bg-panel);border-left:1px solid rgba(255,255,255,.08);
  display:flex;flex-direction:column;transition:.25s ease-out;z-index:6;
}
.cas-panel.open{right:0;}

.cas-tabs{
  display:flex;overflow-x:auto;gap:6px;padding:8px;background:rgba(0,0,0,.25);
}
.cas-tab-btn{
  flex:0 0 auto;padding:6px 10px;font-size:12px;border-radius:10px;
  border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);
  color:var(--text);display:flex;gap:6px;align-items:center;
}
.cas-tab-btn.active{background:var(--accent-soft);border-color:var(--accent);}

.cas-panel-body{
  flex:1;overflow-y:auto;padding:10px;display:flex;flex-direction:column;
}
.category-view{display:none;}
.category-view.active{display:block;}

/* ------------------ SKILL LIST ----------------- */
.skill-list{display:flex;flex-direction:column;gap:6px;margin-top:6px;}
.skill-row{
  padding:6px 7px;border-radius:10px;background:var(--bg-panel-light);
  border:1px solid rgba(255,255,255,.12);
}
.skill-header-line{display:flex;justify-content:space-between;margin-bottom:3px;}
.skill-bar-shell{
  width:100%;height:7px;border-radius:999px;background:rgba(0,0,0,.45);overflow:hidden;
}
.skill-bar-fill{
  height:100%;width:0%;background:linear-gradient(90deg,var(--accent-soft),var(--accent));
  transition:width .25s ease;
}
.skill-meta{font-size:10px;color:var(--text-soft);margin-top:2px;}

/* ---------------- BEHAVIOR CARDS ---------------- */
.behavior-list{display:flex;flex-direction:column;gap:8px;margin-top:4px;font-size:11px;}
.behavior-card{
  border-radius:12px;border:1px solid rgba(255,255,255,.18);
  background:linear-gradient(135deg,rgba(15,51,66,.95),rgba(7,23,31,.96));
  padding:7px 8px;box-shadow:0 4px 12px rgba(0,0,0,.45);display:flex;flex-direction:column;gap:6px;
}
.behavior-header{display:flex;justify-content:space-between;align-items:center;}
.behavior-title{font-weight:600;font-size:12px;}
.behavior-sub{font-size:10px;color:var(--text-soft);}
.behavior-metrics{
  display:grid;grid-template-columns:repeat(4,1fr);gap:4px;font-size:10px;
}
.metric{display:flex;flex-direction:column;}
.behavior-last{font-size:10px;color:var(--text-soft);}

/* ------------------ TIMERS ------------------- */
.timer-list{display:flex;flex-direction:column;gap:6px;margin-top:4px;font-size:11px;}

/* ----------------- HUD ----------------------- */
.hud{
  height:68px;width:100%;display:flex;align-items:center;justify-content:space-between;
  padding:0 10px;background:rgba(0,0,0,.35);backdrop-filter:blur(6px);
  border-top:1px solid rgba(255,255,255,.08);
}
.portrait img{
  width:52px;height:52px;border-radius:12px;object-fit:cover;
  border:2px solid var(--accent-soft);
}
.hud-middle{flex:1;margin:0 10px;}
.hud-top-line{display:flex;align-items:center;gap:8px;margin-bottom:4px;}
.plumbob-shape{
  width:22px;height:22px;background:var(--accent-life);clip-path:polygon(50% 0%,80% 40%,50% 100%,20% 40%);
  box-shadow:0 0 15px var(--accent-life);
}
.mood-gauge{
  width:100%;height:7px;background:rgba(255,255,255,.08);
  border-radius:8px;overflow:hidden;
}
.mood-fill{
  width:40%;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-violet));
  transition:.25s ease;
}
.needs-dots{display:flex;gap:4px;}
.dot{width:8px;height:8px;border-radius:50%;background:var(--accent-soft);}
.hud-hint{font-size:10px;color:var(--text-soft);}
